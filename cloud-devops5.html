<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud & DevOps - Chapter 5: Deployment Strategies</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 2px solid #e9ecef;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: #007bff;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9em;
            transition: background-color 0.3s ease;
        }

        .nav-btn:hover {
            background: #0056b3;
        }

        .nav-btn.secondary {
            background: #6c757d;
        }

        .nav-btn.secondary:hover {
            background: #545b62;
        }

        .content {
            padding: 40px 30px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #FF6B35;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.5em;
            margin: 30px 0 15px 0;
        }

        .section h4 {
            color: #7f8c8d;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            position: relative;
        }

        .code-block::before {
            content: "Terminal";
            position: absolute;
            top: 10px;
            right: 15px;
            background: #FF6B35;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8em;
        }

        .code-block.yaml::before {
            content: "YAML";
        }

        .code-block.json::before {
            content: "JSON";
        }

        .code-block.python::before {
            content: "Python";
        }

        .code-block.bash::before {
            content: "Bash";
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .success-box {
            background: #e8f5e9;
            border-left: 4px solid #4CAF50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .strategy-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .strategy-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .strategy-card:hover {
            transform: translateY(-5px);
        }

        .strategy-card.blue-green {
            border-color: #2196F3;
        }

        .strategy-card.canary {
            border-color: #FF9800;
        }

        .strategy-card.rolling {
            border-color: #4CAF50;
        }

        .strategy-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .deployment-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .deployment-step {
            background: #f8f9fa;
            border: 2px solid #FF6B35;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #FF6B35;
            position: relative;
            flex-shrink: 0;
        }

        .deployment-step::after {
            content: '';
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            width: 25px;
            height: 2px;
            background: #FF6B35;
        }

        .deployment-step:last-child::after {
            display: none;
        }

        .monitoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .monitoring-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #FF6B35;
        }

        .monitoring-item h4 {
            color: #34495e;
            margin-bottom: 10px;
        }

        .practice-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #e9ecef;
        }

        .practice-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .practice-exercise {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #FF6B35;
        }

        .practice-exercise h4 {
            color: #34495e;
            margin-bottom: 10px;
        }

        .quiz-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
        }

        .quiz-section h3 {
            color: white;
            margin-bottom: 20px;
        }

        .quiz-question {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }

        .quiz-question h4 {
            margin-bottom: 10px;
        }

        .quiz-options ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .quiz-options li {
            display: block;
            margin: 5px 0;
            padding: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            cursor: pointer;
        }

        .quiz-options li:hover {
            background: rgba(255,255,255,0.3);
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 40px;
        }

        .footer a {
            color: #FF6B35;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .nav-links {
                flex-direction: column;
            }

            .content {
                padding: 20px 15px;
            }

            .strategy-cards {
                grid-template-columns: 1fr;
            }

            .monitoring-grid {
                grid-template-columns: 1fr;
            }

            .deployment-flow {
                flex-direction: column;
                gap: 20px;
            }

            .deployment-step::after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚òÅÔ∏è Cloud & DevOps</h1>
            <div class="subtitle">Chapter 5: Deployment Strategies</div>
        </div>

        <div class="nav">
            <div class="nav-links">
                <a href="study-guide-progress.html" class="nav-btn">üìä Progress Dashboard</a>
                <a href="cloud-devops4.html" class="nav-btn">‚¨ÖÔ∏è Cloud Platforms</a>
                <a href="study-guide-progress.html" class="nav-btn secondary">üè† Home</a>
            </div>
        </div>

        <div class="content">
            <div class="section">
                <h2>üéØ Chapter Overview</h2>
                <p>Welcome to the final chapter of the Cloud & DevOps curriculum! This comprehensive guide covers production deployment strategies, monitoring, and best practices that will help you build reliable, scalable applications. By the end of this chapter, you'll understand:</p>
                <ul>
                    <li>Advanced deployment strategies (Blue-Green, Canary, Rolling)</li>
                    <li>Production monitoring and observability</li>
                    <li>Logging and alerting best practices</li>
                    <li>Performance optimization techniques</li>
                    <li>Disaster recovery and backup strategies</li>
                    <li>Site Reliability Engineering (SRE) principles</li>
                    <li>DevOps culture and continuous improvement</li>
                    <li>Production troubleshooting and incident response</li>
                </ul>
            </div>

            <div class="section">
                <h2>üöÄ Deployment Strategies</h2>

                <h3>üîÑ Blue-Green Deployment</h3>
                <div class="strategy-cards">
                    <div class="strategy-card blue-green">
                        <h3>üîµ Blue-Green Strategy</h3>
                        <p>Maintain two identical production environments (Blue and Green). Route traffic to one while deploying to the other.</p>
                        <ul>
                            <li><strong>Zero Downtime:</strong> Switch traffic instantly</li>
                            <li><strong>Easy Rollback:</strong> Switch back to previous version</li>
                            <li><strong>Testing:</strong> Test new version before going live</li>
                            <li><strong>Cost:</strong> Requires double infrastructure</li>
                        </ul>
                    </div>
                </div>

                <h4>üîß Blue-Green Implementation</h4>
                <div class="code-block yaml">
# Kubernetes Blue-Green Deployment
apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  selector:
    app: myapp
    version: blue  # Switch between blue/green
  ports:
  - port: 80
    targetPort: 8080
  type: LoadBalancer

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-blue
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
      version: blue
  template:
    metadata:
      labels:
        app: myapp
        version: blue
    spec:
      containers:
      - name: myapp
        image: myapp:v2.0
        ports:
        - containerPort: 8080

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-green
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
      version: green
  template:
    metadata:
      labels:
        app: myapp
        version: green
    spec:
      containers:
      - name: myapp
        image: myapp:v2.1
        ports:
        - containerPort: 8080
                </div>

                <h3>üê¶ Canary Deployment</h3>
                <div class="strategy-cards">
                    <div class="strategy-card canary">
                        <h3>üê¶ Canary Strategy</h3>
                        <p>Gradually roll out changes to a small subset of users before full deployment. Monitor metrics and gradually increase traffic.</p>
                        <ul>
                            <li><strong>Risk Reduction:</strong> Test with real users</li>
                            <li><strong>Gradual Rollout:</strong> Control deployment pace</li>
                            <li><strong>Quick Rollback:</strong> Stop rollout if issues detected</li>
                            <li><strong>Resource Efficient:</strong> No duplicate infrastructure</li>
                        </ul>
                    </div>
                </div>

                <h4>üîß Canary with Istio</h4>
                <div class="code-block yaml">
# Istio VirtualService for Canary Deployment
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: myapp-canary
spec:
  http:
  - route:
    - destination:
        host: myapp
        subset: v1
      weight: 90  # 90% traffic to v1
    - destination:
        host: myapp
        subset: v2
      weight: 10  # 10% traffic to v2

---
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: myapp-destination
spec:
  host: myapp
  subsets:
  - name: v1
    labels:
      version: v1
  - name: v2
    labels:
      version: v2
                </div>

                <h3>üîÑ Rolling Deployment</h3>
                <div class="strategy-cards">
                    <div class="strategy-card rolling">
                        <h3>üîÑ Rolling Strategy</h3>
                        <p>Update instances gradually, replacing old versions with new ones in small batches while keeping the application available.</p>
                        <ul>
                            <li><strong>Resource Efficient:</strong> No extra infrastructure needed</li>
                            <li><strong>Simple:</strong> Built into most platforms</li>
                            <li><strong>Gradual:</strong> Reduces risk of total failure</li>
                            <li><strong>Capacity:</strong> Maintains service capacity during deployment</li>
                        </ul>
                    </div>
                </div>

                <h4>üîß Kubernetes Rolling Update</h4>
                <div class="code-block yaml">
# Rolling Update Strategy
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-rolling
spec:
  replicas: 5
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1    # Max pods unavailable during update
      maxSurge: 1         # Max extra pods during update
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
    spec:
      containers:
      - name: myapp
        image: myapp:v2.0
        ports:
        - containerPort: 8080
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
                </div>

                <h3>üìä Deployment Strategy Comparison</h3>
                <div class="info-box">
                    <h4>üéØ Choosing the Right Strategy:</h4>
                    <ul>
                        <li><strong>Blue-Green:</strong> Critical applications, complex changes, zero-downtime requirement</li>
                        <li><strong>Canary:</strong> User-facing features, gradual rollout, A/B testing</li>
                        <li><strong>Rolling:</strong> Simple updates, resource constraints, standard deployments</li>
                        <li><strong>Feature Flags:</strong> Toggle features without redeployment</li>
                        <li><strong>Shadow Deployment:</strong> Test with production traffic without affecting users</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>üìä Production Monitoring</h2>

                <h3>üîç Observability Fundamentals</h3>

                <h4>üìà Key Metrics to Monitor</h4>
                <div class="monitoring-grid">
                    <div class="monitoring-item">
                        <h4>‚ö° System Metrics</h4>
                        <ul>
                            <li>CPU utilization</li>
                            <li>Memory usage</li>
                            <li>Disk I/O</li>
                            <li>Network traffic</li>
                            <li>System load</li>
                        </ul>
                    </div>
                    <div class="monitoring-item">
                        <h4>üåê Application Metrics</h4>
                        <ul>
                            <li>Response time</li>
                            <li>Error rate</li>
                            <li>Throughput</li>
                            <li>Request rate</li>
                            <li>Active connections</li>
                        </ul>
                    </div>
                    <div class="monitoring-item">
                        <h4>üíº Business Metrics</h4>
                        <ul>
                            <li>User engagement</li>
                            <li>Conversion rates</li>
                            <li>Revenue metrics</li>
                            <li>Customer satisfaction</li>
                            <li>Feature usage</li>
                        </ul>
                    </div>
                </div>

                <h4>üîß Prometheus Monitoring Setup</h4>
                <div class="code-block yaml">
# Prometheus Configuration
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "alert_rules.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']

  - job_name: 'myapp'
    static_configs:
      - targets: ['myapp:8080']
    metrics_path: '/metrics'
                </div>

                <h4>üîß Grafana Dashboard</h4>
                <div class="code-block json">
{
  "dashboard": {
    "title": "Application Monitoring",
    "tags": ["application", "monitoring"],
    "timezone": "browser",
    "panels": [
      {
        "title": "HTTP Request Rate",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(http_requests_total[5m])",
            "legendFormat": "{{method}} {{status}}"
          }
        ]
      },
      {
        "title": "Response Time",
        "type": "graph",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))",
            "legendFormat": "95th percentile"
          }
        ]
      },
      {
        "title": "Error Rate",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(http_requests_total{status=~\"5..\"}[5m]) / rate(http_requests_total[5m]) * 100",
            "legendFormat": "Error Rate %"
          }
        ]
      }
    ]
  }
}
                </div>
            </div>

            <div class="section">
                <h2>üìù Logging & Alerting</h2>

                <h3>üîç Structured Logging</h3>

                <h4>üîß ELK Stack Configuration</h4>
                <div class="code-block yaml">
# Logstash Configuration
input {
  beats {
    port => 5044
  }
}

filter {
  json {
    source => "message"
  }

  date {
    match => ["timestamp", "ISO8601"]
  }

  mutate {
    remove_field => ["message", "@version", "host"]
  }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "app-logs-%{+YYYY.MM.dd}"
  }
}
                </div>

                <h4>üîß Application Logging</h4>
                <div class="code-block python">
# Python Structured Logging
import logging
import json
from datetime import datetime

# Configure structured logging
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)

class StructuredLogger:
    def __init__(self, name):
        self.logger = logging.getLogger(name)

    def info(self, message, **kwargs):
        self.logger.info(json.dumps({
            'timestamp': datetime.utcnow().isoformat(),
            'level': 'INFO',
            'message': message,
            'service': self.logger.name,
            **kwargs
        }))

    def error(self, message, error=None, **kwargs):
        log_data = {
            'timestamp': datetime.utcnow().isoformat(),
            'level': 'ERROR',
            'message': message,
            'service': self.logger.name,
            **kwargs
        }

        if error:
            log_data['error'] = str(error)
            log_data['error_type'] = type(error).__name__

        self.logger.error(json.dumps(log_data))

# Usage
logger = StructuredLogger('myapp')

logger.info('User login successful',
           user_id='12345',
           ip_address='192.168.1.1',
           user_agent='Mozilla/5.0...')

logger.error('Database connection failed',
            error='Connection timeout',
            database_host='db.example.com',
            retry_count=3)
                </div>

                <h3>üö® Alerting Best Practices</h3>

                <h4>üîß AlertManager Configuration</h4>
                <div class="code-block yaml">
# AlertManager Configuration
global:
  smtp_smarthost: 'smtp.gmail.com:587'
  smtp_from: 'alerts@example.com'
  smtp_auth_username: 'alerts@example.com'
  smtp_auth_password: 'your-password'

route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'team-email'
  routes:
  - match:
      severity: critical
    receiver: 'critical-pager'
  - match:
      severity: warning
    receiver: 'warning-email'

receivers:
- name: 'team-email'
  email_configs:
  - to: 'team@example.com'
    subject: '{{ .GroupLabels.alertname }}'
    body: '{{ .CommonAnnotations.description }}'

- name: 'critical-pager'
  pagerduty_configs:
  - service_key: 'your-pagerduty-key'
                </div>

                <h4>üîß Prometheus Alert Rules</h4>
                <div class="code-block yaml">
# Alert Rules
groups:
- name: application_alerts
  rules:
  - alert: HighErrorRate
    expr: rate(http_requests_total{status=~'5..'}[5m]) / rate(http_requests_total[5m]) > 0.05
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "High error rate detected"
      description: "Error rate is {{ $value }}% (threshold: 5%)"

  - alert: HighResponseTime
    expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) > 2
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "High response time detected"
      description: "95th percentile response time is {{ $value }}s"

  - alert: LowDiskSpace
    expr: (1 - node_filesystem_avail_bytes / node_filesystem_size_bytes) * 100 > 85
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "Low disk space"
      description: "Disk usage is {{ $value }}%"

  - alert: ServiceDown
    expr: up == 0
    for: 1m
    labels:
      severity: critical
    annotations:
      summary: "Service is down"
      description: "Service {{ $labels.job }} is down"
                </div>
            </div>

            <div class="section">
                <h2>‚ö° Performance Optimization</h2>

                <h3>üîß Application Performance</h3>

                <h4>üöÄ Caching Strategies</h4>
                <div class="info-box">
                    <h4>üíæ Multi-Level Caching:</h4>
                    <ul>
                        <li><strong>Browser Cache:</strong> Static assets, CDN</li>
                        <li><strong>CDN:</strong> Global content delivery</li>
                        <li><strong>Application Cache:</strong> In-memory, Redis</li>
                        <li><strong>Database Cache:</strong> Query result caching</li>
                        <li><strong>API Gateway Cache:</strong> Response caching</li>
                    </ul>
                </div>

                <h4>üîß Redis Caching Setup</h4>
                <div class="code-block yaml">
# Redis Cache Configuration
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis-cache
spec:
  replicas: 1
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
      - name: redis
        image: redis:7-alpine
        ports:
        - containerPort: 6379
        command: ["redis-server", "--maxmemory", "256mb", "--maxmemory-policy", "allkeys-lru"]
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"
        volumeMounts:
        - name: redis-data
          mountPath: /data
      volumes:
      - name: redis-data
        emptyDir: {}
                </div>

                <h3>‚öñÔ∏è Load Balancing</h3>

                <h4>üîß NGINX Load Balancer</h4>
                <div class="code-block bash">
# NGINX Load Balancing Configuration
upstream backend {
    least_conn;  # Least connections algorithm
    server backend1.example.com:8080 weight=3;
    server backend2.example.com:8080 weight=2;
    server backend3.example.com:8080 weight=1;
    server backend4.example.com:8080 backup;  # Backup server
}

server {
    listen 80;
    server_name example.com;

    location / {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # Health check
        health_check interval=10 fails=3 passes=2;
    }

    # Static file caching
    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
                </div>

                <h3>üìà Database Optimization</h3>

                <h4>üîß Database Performance Tuning</h4>
                <div class="code-block sql">
-- Database Performance Optimization

-- Add indexes for frequently queried columns
CREATE INDEX idx_user_email ON users(email);
CREATE INDEX idx_orders_user_date ON orders(user_id, created_at);

-- Query optimization with EXPLAIN
EXPLAIN ANALYZE
SELECT u.name, COUNT(o.id) as order_count
FROM users u
LEFT JOIN orders o ON u.id = o.user_id
WHERE u.created_at > '2024-01-01'
GROUP BY u.id, u.name
HAVING COUNT(o.id) > 5;

-- Connection pooling configuration
-- For PostgreSQL: pgbouncer
-- For MySQL: ProxySQL

-- Query result caching
SELECT SQL_CACHE * FROM products WHERE category_id = ?;

-- Database partitioning for large tables
CREATE TABLE orders_2024 PARTITION OF orders
    FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');

-- Read replicas for high-traffic applications
-- Configure read/write splitting in application
                </div>
            </div>

            <div class="section">
                <h2>üõ°Ô∏è Disaster Recovery</h2>

                <h3>üîÑ Backup Strategies</h3>

                <h4>üîß Multi-Region Backup</h4>
                <div class="code-block bash">
# AWS Multi-Region Backup Script
#!/bin/bash

# Variables
SOURCE_REGION="us-east-1"
DESTINATION_REGION="us-west-2"
DB_INSTANCE="myapp-db"

# Create cross-region snapshot
SNAPSHOT_ID=$(aws rds create-db-snapshot \
    --db-instance-identifier $DB_INSTANCE \
    --db-snapshot-identifier backup-$(date +%Y%m%d-%H%M%S) \
    --region $SOURCE_REGION \
    --query 'DBSnapshot.DBSnapshotIdentifier' \
    --output text)

echo "Created snapshot: $SNAPSHOT_ID"

# Copy snapshot to destination region
aws rds copy-db-snapshot \
    --source-db-snapshot-identifier $SNAPSHOT_ID \
    --target-db-snapshot-identifier $SNAPSHOT_ID \
    --source-region $SOURCE_REGION \
    --region $DESTINATION_REGION \
    --copy-tags

echo "Copied snapshot to $DESTINATION_REGION"

# Clean up old snapshots (keep last 7 days)
aws rds describe-db-snapshots \
    --region $SOURCE_REGION \
    --query 'DBSnapshots[?SnapshotCreateTime<`'"$(date -d '7 days ago' +%Y-%m-%d)"'`].DBSnapshotIdentifier' \
    --output text | xargs -I {} aws rds delete-db-snapshot \
    --db-snapshot-identifier {} \
    --region $SOURCE_REGION
                </div>

                <h3>üîÑ Failover Strategies</h3>

                <h4>üîß Active-Active Configuration</h4>
                <div class="code-block yaml">
# Kubernetes Multi-Region Deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-us-east
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
      region: us-east
  template:
    metadata:
      labels:
        app: myapp
        region: us-east
    spec:
      containers:
      - name: myapp
        image: myapp:latest
        env:
        - name: REGION
          value: "us-east"
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: db-config
              key: primary-db

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-us-west
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
      region: us-west
  template:
    metadata:
      labels:
        app: myapp
        region: us-west
    spec:
      containers:
      - name: myapp
        image: myapp:latest
        env:
        - name: REGION
          value: "us-west"
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: db-config
              key: secondary-db
                </div>

                <h3>üìã Recovery Time Objectives (RTO/RPO)</h3>
                <div class="info-box">
                    <h4>üéØ Business Continuity Metrics:</h4>
                    <ul>
                        <li><strong>RTO (Recovery Time Objective):</strong> Maximum acceptable downtime</li>
                        <li><strong>RPO (Recovery Point Objective):</strong> Maximum acceptable data loss</li>
                        <li><strong>RTO Examples:</strong> Critical systems (1 hour), Important systems (4 hours), Minor systems (24 hours)</li>
                        <li><strong>RPO Examples:</strong> Financial data (1 minute), User data (1 hour), Logs (24 hours)</li>
                        <li><strong>Cost vs. Resilience:</strong> More resilience = higher cost</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>üîß SRE Principles</h2>

                <h3>üéØ Service Level Objectives (SLOs)</h3>

                <h4>üîß SLO Definition</h4>
                <div class="code-block yaml">
# Service Level Objectives
apiVersion: sre.google.com/v1
kind: ServiceLevelObjective
metadata:
  name: api-availability-slo
spec:
  service: api-service
  indicators:
    availability:
      threshold: 0.995  # 99.5% availability
      window: 30d       # 30-day rolling window
  budget:
    burnRate: 0.1      # Error budget burn rate
    alertThreshold: 0.5  # Alert when 50% of budget consumed

---
# Error Budget Policy
error_budget_policy:
  name: "API Error Budget"
  description: "99.5% availability over 30 days"
  objective: 0.995
  window: "30d"
  burn_rate_thresholds:
    - threshold: 2     # Alert when burning 2x faster than planned
      severity: warning
    - threshold: 5     # Alert when burning 5x faster than planned
      severity: critical
    - threshold: 10    # Alert when burning 10x faster than planned
      severity: emergency
                </div>

                <h3>üîÑ Incident Response</h3>

                <h4>üìã Incident Response Process</h4>
                <div class="deployment-flow">
                    <div class="deployment-step">üîç<br/>Detect</div>
                    <div class="deployment-step">üìû<br/>Notify</div>
                    <div class="deployment-step">üî¨<br/>Investigate</div>
                    <div class="deployment-step">üõ†Ô∏è<br/>Mitigate</div>
                    <div class="deployment-step">üìù<br/>Resolve</div>
                    <div class="deployment-step">üìö<br/>Learn</div>
                </div>

                <h4>üîß Incident Response Runbook</h4>
                <div class="code-block yaml">
# Incident Response Runbook Template
incident_runbook:
  title: "API Service Outage"
  severity_levels:
    - sev1: "Critical - Complete service outage"
    - sev2: "High - Major functionality impacted"
    - sev3: "Medium - Minor functionality impacted"
    - sev4: "Low - No user impact"

  response_times:
    sev1: "15 minutes"
    sev2: "1 hour"
    sev3: "4 hours"
    sev4: "24 hours"

  escalation_paths:
    - "On-call Engineer ‚Üí Tech Lead ‚Üí Engineering Manager ‚Üí CTO"

  troubleshooting_steps:
    - "Check service health endpoint"
    - "Review application logs"
    - "Check database connectivity"
    - "Verify load balancer configuration"
    - "Check resource utilization"
    - "Review recent deployments"

  communication_template: |
    Subject: [SEV{severity}] {service} Incident - {status}

    Incident Summary:
    - Service: {service}
    - Severity: SEV{severity}
    - Start Time: {start_time}
    - Current Status: {status}
    - Impact: {impact_description}

    What we know:
    {current_findings}

    What we're doing:
    {actions_taken}

    Next update: {next_update_time}
                </div>
            </div>

            <div class="section">
                <h2>üöÄ DevOps Culture</h2>

                <h3>ü§ù Collaboration Principles</h3>

                <h4>üîÑ Continuous Improvement</h4>
                <div class="info-box">
                    <h4>üìà DevOps Culture Pillars:</h4>
                    <ul>
                        <li><strong>Shared Responsibility:</strong> Everyone owns production</li>
                        <li><strong>Automation First:</strong> Automate everything possible</li>
                        <li><strong>Continuous Learning:</strong> Learn from failures</li>
                        <li><strong>Fast Feedback:</strong> Quick validation of changes</li>
                        <li><strong>Cross-Functional Teams:</strong> Break down silos</li>
                        <li><strong>Customer Focus:</strong> User experience drives decisions</li>
                        <li><strong>Transparency:</strong> Open communication and visibility</li>
                        <li><strong>Empowerment:</strong> Teams make their own decisions</li>
                    </ul>
                </div>

                <h3>üìä Measuring DevOps Success</h3>

                <h4>üîß DORA Metrics</h4>
                <div class="success-box">
                    <h4>üìä DevOps Research and Assessment (DORA) Metrics:</h4>
                    <ul>
                        <li><strong>Deployment Frequency:</strong> How often you deploy code</li>
                        <li><strong>Lead Time for Changes:</strong> Time from commit to production</li>
                        <li><strong>Change Failure Rate:</strong> Percentage of failed deployments</li>
                        <li><strong>Time to Restore Service:</strong> How quickly you recover from incidents</li>
                        <li><strong>Elite Performers:</strong> Deploy multiple times per day, <15min lead time, <15% failure rate, <1hr recovery</li>
                        <li><strong>High Performers:</strong> Deploy once per week to once per month</li>
                        <li><strong>Medium Performers:</strong> Deploy once per month to once every 6 months</li>
                        <li><strong>Low Performers:</strong> Deploy less than once every 6 months</li>
                    </ul>
                </div>
            </div>

            <div class="practice-section">
                <h3>üí™ Practice Exercises</h3>

                <div class="practice-exercise">
                    <h4>Exercise 1: Blue-Green Deployment</h4>
                    <p>Set up a blue-green deployment pipeline:</p>
                    <ol>
                        <li>Create two identical environments (blue and green)</li>
                        <li>Configure load balancer for traffic switching</li>
                        <li>Deploy new version to inactive environment</li>
                        <li>Run automated tests on new version</li>
                        <li>Switch traffic to new version</li>
                        <li>Monitor for issues and rollback if needed</li>
                    </ol>
                </div>

                <div class="practice-exercise">
                    <h4>Exercise 2: Monitoring Setup</h4>
                    <p>Implement comprehensive monitoring:</p>
                    <ol>
                        <li>Set up Prometheus for metrics collection</li>
                        <li>Configure Grafana dashboards</li>
                        <li>Create alerting rules for critical metrics</li>
                        <li>Set up log aggregation with ELK stack</li>
                        <li>Configure health checks and service discovery</li>
                        <li>Test alerting and incident response procedures</li>
                    </ol>
                </div>

                <div class="practice-exercise">
                    <h4>Exercise 3: Disaster Recovery</h4>
                    <p>Implement disaster recovery strategy:</p>
                    <ol>
                        <li>Define RTO and RPO for your application</li>
                        <li>Set up automated backups</li>
                        <li>Configure multi-region deployment</li>
                        <li>Test failover procedures</li>
                        <li>Create incident response runbook</li>
                        <li>Conduct disaster recovery drill</li>
                    </ol>
                </div>
            </div>

            <div class="quiz-section">
                <h3>üß† Knowledge Check</h3>

                <div class="quiz-question">
                    <h4>Question 1: Which deployment strategy requires duplicate infrastructure?</h4>
                    <div class="quiz-options">
                        <div class="quiz-option">Blue-Green</div>
                        <div class="quiz-option">Canary</div>
                        <div class="quiz-option">Rolling</div>
                        <div class="quiz-option">Feature Flags</div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h4>Question 2: What does RTO stand for in disaster recovery?</h4>
                    <div class="quiz-options">
                        <ul>
                            <li>Recovery Time Objective</li>
                            <li>Recovery Testing Objective</li>
                            <li>Restore Time Objective</li>
                            <li>Recovery Tolerance Objective</li>
                        </ul>
                    </div>
                </div>

                <div class="quiz-question">
                    <h4>Question 3: Which DORA metric measures how quickly you recover from incidents?</h4>
                    <div class="quiz-options">
                        <div class="quiz-option">Deployment Frequency</div>
                        <div class="quiz-option">Lead Time for Changes</div>
                        <div class="quiz-option">Change Failure Rate</div>
                        <div class="quiz-option">Time to Restore Service</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üìã Production Best Practices</h2>

                <div class="success-box">
                    <h4>üí° Essential Production Practices:</h4>
                    <ul>
                        <li><strong>Zero Trust Security:</strong> Never trust, always verify</li>
                        <li><strong>Infrastructure as Code:</strong> Version control everything</li>
                        <li><strong>Immutable Infrastructure:</strong> Never modify running systems</li>
                        <li><strong>Configuration Management:</strong> Centralized config management</li>
                        <li><strong>Secrets Management:</strong> Secure credential storage</li>
                        <li><strong>Capacity Planning:</strong> Monitor and scale proactively</li>
                        <li><strong>Chaos Engineering:</strong> Test system resilience</li>
                        <li><strong>Documentation:</strong> Keep runbooks and procedures updated</li>
                        <li><strong>Post-Mortems:</strong> Learn from every incident</li>
                        <li><strong>Continuous Training:</strong> Keep skills current</li>
                    </ul>
                </div>

                <h3>üîß Essential Tools & Resources</h3>
                <div class="info-box">
                    <h4>üîß Production Toolchain:</h4>
                    <ul>
                        <li><strong>Monitoring:</strong> Prometheus, Grafana, Datadog, New Relic</li>
                        <li><strong>Logging:</strong> ELK Stack, Fluentd, Loki</li>
                        <li><strong>Alerting:</strong> AlertManager, PagerDuty, OpsGenie</li>
                        <li><strong>Tracing:</strong> Jaeger, Zipkin, AWS X-Ray</li>
                        <li><strong>Load Testing:</strong> JMeter, k6, Artillery</li>
                        <li><strong>Chaos Engineering:</strong> Chaos Monkey, Gremlin</li>
                        <li><strong>Configuration:</strong> Consul, etcd, Vault</li>
                        <li><strong>Deployment:</strong> ArgoCD, Flux, Spinnaker</li>
                        <li><strong>Security:</strong> Falco, Aqua Security, Snyk</li>
                        <li><strong>Incident Management:</strong> Jira Service Desk, Zendesk</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>üöÄ Chapter Summary</h2>
                <p>This comprehensive final chapter has equipped you with production-ready deployment and operations knowledge:</p>

                <ul>
                    <li><strong>Deployment Strategies:</strong> Blue-Green, Canary, Rolling deployments</li>
                    <li><strong>Monitoring & Observability:</strong> Metrics, logging, alerting systems</li>
                    <li><strong>Performance Optimization:</strong> Caching, load balancing, database tuning</li>
                    <li><strong>Disaster Recovery:</strong> Backup strategies, failover, RTO/RPO</li>
                    <li><strong>SRE Principles:</strong> SLOs, error budgets, incident response</li>
                    <li><strong>DevOps Culture:</strong> Collaboration, continuous improvement, DORA metrics</li>
                    <li><strong>Production Best Practices:</strong> Security, automation, documentation</li>
                    <li><strong>Essential Tools:</strong> Monitoring, logging, deployment, security tools</li>
                    <li><strong>Incident Response:</strong> Detection, investigation, mitigation, learning</li>
                    <li><strong>Continuous Learning:</strong> Post-mortems, chaos engineering, training</li>
                </ul>

                <div class="success-box">
                    <strong>üéâ Congratulations!</strong> You have completed the comprehensive Cloud & DevOps curriculum! You now have the knowledge and skills to build, deploy, and maintain production-ready applications using modern DevOps practices.
                </div>
            </div>
        </div>

        <div class="footer">
            <p>¬© 2024 Study Guide Collection | <a href="study-guide-progress.html">View Progress Dashboard</a> | <a href="cloud-devops4.html">Cloud Platforms ‚Üê</a> | <a href="study-guide-progress.html">üè† Home</a></p>
        </div>
    </div>

    <script>
        // Add interactive features
        document.addEventListener('DOMContentLoaded', function() {
            // Quiz functionality
            const quizOptions = document.querySelectorAll('.quiz-options li');
            const correctAnswers = [
                'Blue-Green',
                'Recovery Time Objective',
                'Time to Restore Service'
            ];

            quizOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const questionDiv = this.closest('.quiz-question');
                    const questionIndex = Array.from(questionDiv.parentElement.children).indexOf(questionDiv);
                    const isCorrect = this.textContent === correctAnswers[questionIndex];

                    // Remove previous styling
                    const allOptions = questionDiv.querySelectorAll('.quiz-options li');
                    allOptions.forEach(opt => {
                        opt.style.background = '';
                        opt.style.color = '';
                    });

                    if (isCorrect) {
                        this.style.background = '#4CAF50';
                        this.style.color = 'white';
                        alert('‚úÖ Correct!');
                    } else {
                        this.style.background = '#f44336';
                        this.style.color = 'white';
                        alert('‚ùå Incorrect. Try again!');
                    }
                });
            });

            // Code block copy functionality
            const codeBlocks = document.querySelectorAll('.code-block');
            codeBlocks.forEach(block => {
                const copyBtn = document.createElement('button');
                copyBtn.textContent = 'üìã Copy';
                copyBtn.style.cssText = `
                    position: absolute;
                    top: 10px;
                    right: 60px;
                    background: #FF6B35;
                    color: white;
                    border: none;
                    padding: 4px 8px;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 0.8em;
                `;

                copyBtn.addEventListener('click', function() {
                    const code = block.textContent.replace(/^(Terminal|YAML|JSON|Python|Bash)$/m, '').trim();
                    navigator.clipboard.writeText(code).then(() => {
                        this.textContent = '‚úÖ Copied!';
                        setTimeout(() => this.textContent = 'üìã Copy', 2000);
                    });
                });

                block.style.position = 'relative';
                block.appendChild(copyBtn);
            });
        });
    </script>
</body>
</html>